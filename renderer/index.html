<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ForgeAI</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui'],
            mono: ['JetBrains Mono', 'ui-monospace', 'SFMono-Regular']
          },
          colors: {
            night: {
              950: '#0A0B0F',
              900: '#0E1117',
              850: '#11131B',
              800: '#141824',
              700: '#1A2030',
              600: '#232B3A',
              500: '#2E394D'
            },
            ember: {
              500: '#FF4D16', /* hot orange */
            },
            mag: { 500: '#A855F7' },
            steel: { 300:'#A6B3C7', 400:'#94A3B8', 500:'#64748B' }
          },
          boxShadow: {
            forge: '0 10px 30px -10px rgba(242,56,12,.35), 0 1px 0 0 rgba(255,255,255,.02) inset'
          },
          backgroundImage: {
            forge: 'radial-gradient(1200px 600px at 10% -10%, rgba(255,77,22,0.18), transparent 60%), radial-gradient(1000px 500px at 110% 10%, rgba(168,85,247,0.12), transparent 60%)'
          },
          keyframes: {
            shear: { '0%': { backgroundPosition:'0% 50%' }, '100%': { backgroundPosition:'200% 50%' } }
          },
          animation: { shear: 'shear 8s linear infinite' }
        }
      }
    }
  </script>

  <style>
    body { font-family: Inter, sans-serif; }
    .code-block { font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, monospace; }
    .brand-gradient {
      background: linear-gradient(100deg, #FF4D16, #FF7A2F, #F97316, #A855F7 80%);
      background-size: 200% 200%;
    }
    .brand-text {
      background: linear-gradient(100deg, #fff, #FFD6C2 25%, #FFB07A 45%, #EAB308 60%, #C084FC 85%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
      animation: shear 10s linear infinite;
    }
    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(148,163,184,0.12);
      border-radius: 0.75rem;
    }
    .ring-gradient { position: relative; border-radius: 0.8rem; }
    .ring-gradient::before {
      content: ""; position: absolute; inset: -1px; border-radius: inherit;
      background: linear-gradient(135deg, rgba(255,77,22,.5), rgba(168,85,247,.45) 60%, rgba(255,255,255,.06));
      z-index: -1; opacity: .35; filter: blur(14px);
    }
    /* Thin scrollbars for code/console */
    .thin-scroll::-webkit-scrollbar { height: 8px; width: 8px; }
    .thin-scroll::-webkit-scrollbar-thumb { background: #2E394D; border-radius: 8px; }
    .thin-scroll::-webkit-scrollbar-thumb:hover { background: #3a4861; }

    /* circular spinner (windows-ish) */
    @keyframes spin { to { transform: rotate(360deg); } }
    .status-spinner {
      width: 16px; height: 16px; border-radius: 9999px;
      border: 2px solid rgba(255,255,255,0.12);
      border-top-color: #A855F7;   /* preview color */
      border-right-color: #A855F7;
      animation: spin .7s linear infinite;
    }
    .status-spinner.run {
      border-top-color: #FF4D16;   /* run color */
      border-right-color: #FF4D16;
    }
  </style>
</head>

<body class="bg-night-950 text-steel-400 min-h-screen relative">
  <!-- ambient forge glow -->
  <div class="absolute inset-0 bg-forge pointer-events-none"></div>

  <div class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="sticky top-0 z-20 backdrop-blur-sm bg-night-900/70 border-b border-white/5">
      <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="relative w-10 h-10 rounded-lg overflow-hidden brand-gradient shadow-forge flex items-center justify-center">
            <img src="./assets/forgeai-logo.png" alt="ForgeAI" class="w-full h-full object-contain" onerror="this.style.display='none'"/>
            <svg class="absolute inset-0 m-auto w-6 h-6 text-black/80" viewBox="0 0 24 24" fill="currentColor">
              <path d="M4 14h16a1 1 0 0 1 0 2h-2l-1 3H7l-1-3H4a1 1 0 1 1 0-2zM9 8h6v2H9z"/>
            </svg>
          </div>
          <div>
            <div class="text-lg font-semibold tracking-tight brand-text leading-none">ForgeAI</div>
            <div class="text-[11px] text-steel-500/80 -mt-0.5">Prompt â†’ Plan â†’ Macro</div>
          </div>
          <div class="hidden md:flex items-center gap-2 ml-3">
            <span class="px-2 py-0.5 border border-white/10 rounded-full text-[11px] text-steel-300 bg-white/5">v1.0</span>
            <span class="px-2 py-0.5 border border-white/10 rounded-full text-[11px] text-mag-500 bg-white/5">AI-Powered</span>
          </div>
        </div>

        <div class="flex items-center gap-3">
          <div class="flex items-center gap-2 text-xs">
            <!-- NEW status icon + text -->
            <div id="statusIcon" class="w-2 h-2 rounded-full bg-ember-500 animate-pulse"></div>
            <span id="statusText" class="text-steel-400">Ready</span>
          </div>

          <button id="previewBtn"
                  class="hidden sm:inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-white/10 bg-night-800 hover:bg-night-700 text-steel-300 text-sm transition">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 5c-7 0-10 7-10 7s3 7 10 7 10-7 10-7-3-7-10-7zm0 12a5 5 0 110-10 5 5 0 010 10z"/></svg>
            Preview
          </button>

          <button id="runBtn"
                  class="inline-flex items-center gap-2 px-4 py-2 rounded-lg brand-gradient text-white font-medium shadow-forge hover:opacity-[.95] transition">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
            Forge
          </button>
        </div>
      </div>
    </header>

    <!-- Main -->
    <main class="flex-1 max-w-6xl mx-auto w-full px-6 py-6 space-y-6">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Prompt -->
        <section class="ring-gradient p-[1px]">
          <div class="card p-6">
            <h2 class="text-base font-semibold text-white mb-4">Design Prompt</h2>

            <textarea id="prompt"
              class="code-block w-full h-44 bg-night-850 border border-white/10 rounded-md p-4 text-[13px] text-steel-300 placeholder:opacity-60 focus:outline-none focus:ring-2 focus:ring-ember-500/40 focus:border-ember-500/60 transition thin-scroll"
              placeholder="Describe your SolidWorks designâ€¦
Example: Create a 120x80x25 mm box on the Front Plane. Add 8 mm fillet to all outer edges."
              spellcheck="false"></textarea>

            <div class="mt-3 flex items-center justify-between text-[12px] text-steel-500">
              <div>ðŸ’¡ Include plane, dimensions, and ops (extrude, cut, fillet)</div>
              <div class="flex items-center gap-1">
                <kbd class="px-1.5 py-0.5 bg-night-800 border border-white/10 rounded">Ctrl</kbd>+
                <kbd class="px-1.5 py-0.5 bg-night-800 border border-white/10 rounded">Enter</kbd>
                <span class="ml-1 mr-3">preview</span>
                <kbd class="px-1.5 py-0.5 bg-night-800 border border-white/10 rounded">Ctrl</kbd>+
                <kbd class="px-1.5 py-0.5 bg-night-800 border border-white/10 rounded">Shift</kbd>+
                <kbd class="px-1.5 py-0.5 bg-night-800 border border-white/10 rounded">Enter</kbd>
                <span class="ml-1">forge</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Plan + Code -->
        <div class="space-y-6">
          <!-- Plan -->
          <section class="ring-gradient p-[1px]">
            <div class="card p-6">
              <div class="flex items-center justify-between mb-3">
                <h2 class="text-base font-semibold text-white">Execution Plan</h2>
                <span id="planBadges" class="text-xs text-steel-500"></span>
              </div>
              <div class="relative">
                <button id="copyPlanBtn"
                        class="absolute top-2 right-2 px-2.5 py-1 text-xs rounded bg-night-800 border border-white/10 hover:bg-night-700 text-steel-300 transition">
                  Copy
                </button>
                <pre id="plan" class="code-block bg-night-900 border border-white/10 rounded-md p-4 text-[12.5px] text-steel-300 h-40 overflow-auto thin-scroll">// Plan will appear here after preview</pre>
              </div>
            </div>
          </section>

          <!-- Code -->
          <section class="ring-gradient p-[1px]">
            <div class="card p-6">
              <div class="flex items-center justify-between mb-3">
                <h2 class="text-base font-semibold text-white">Generated VBScript</h2>
              </div>
              <div class="relative">
                <button id="copyCodeBtn"
                        class="absolute top-2 right-2 px-2.5 py-1 text-xs rounded bg-night-800 border border-white/10 hover:bg-night-700 text-steel-300 transition">
                  Copy
                </button>
                <pre id="code" class="code-block bg-night-900 border border-white/10 rounded-md p-4 text-[12.5px] text-steel-300 h-40 overflow-auto thin-scroll">// VBScript will be generated here</pre>
              </div>
            </div>
          </section>
        </div>
      </div>

      <!-- Console -->
      <section class="ring-gradient p-[1px]">
        <div class="card p-6">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-base font-semibold text-white">Execution Log</h2>
            <div id="runSpinner" class="w-4 h-4 border-2 border-ember-500 border-t-transparent rounded-full animate-spin hidden"></div>
          </div>
          <div id="logs" class="code-block bg-night-900 border border-white/10 rounded-md p-4 h-36 overflow-auto thin-scroll text-[12.5px] text-steel-300">
âž¤ System ready. Enter a design prompt to beginâ€¦
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="./renderer.js"></script>
</body>
</html>
